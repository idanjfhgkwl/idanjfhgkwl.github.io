<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>캐글 타이타닉 분석 - 제목</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="제목"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="제목"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="사전 준비Kaggle 데이터 불러오기Kaggle API 설치1!pip install kaggle  Requirement already satisfied: kaggle in &amp;#x2F;usr&amp;#x2F;local&amp;#x2F;lib&amp;#x2F;python3.6&amp;#x2F;dist-packages (1.5.9) Requirement already satisfied: slugify in &amp;#x2F;usr&amp;#x2F;local&amp;#x2F;lib&amp;#x2F;"><meta property="og:type" content="blog"><meta property="og:title" content="캐글 타이타닉 분석"><meta property="og:url" content="https://github.com/idanjfhgkwl/idanjfhgkwl.github.io/2020/11/04/study/kaggle_titanic/"><meta property="og:site_name" content="제목"><meta property="og:description" content="사전 준비Kaggle 데이터 불러오기Kaggle API 설치1!pip install kaggle  Requirement already satisfied: kaggle in &amp;#x2F;usr&amp;#x2F;local&amp;#x2F;lib&amp;#x2F;python3.6&amp;#x2F;dist-packages (1.5.9) Requirement already satisfied: slugify in &amp;#x2F;usr&amp;#x2F;local&amp;#x2F;lib&amp;#x2F;"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_55_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_56_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_57_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_60_0.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_73_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_75_0.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_79_0.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_86_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_88_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_93_0.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_95_1.png"><meta property="og:image" content="https://github.com/images/kaggle_titanic/output_98_0.png"><meta property="article:published_time" content="2020-11-04T06:54:24.162Z"><meta property="article:modified_time" content="2020-11-04T07:03:46.062Z"><meta property="article:author" content="JustY"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/kaggle_titanic/output_55_1.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/idanjfhgkwl/idanjfhgkwl.github.io/2020/11/04/study/kaggle_titanic/"},"headline":"제목","image":["https://github.com/images/kaggle_titanic/output_55_1.png","https://github.com/images/kaggle_titanic/output_56_1.png","https://github.com/images/kaggle_titanic/output_57_1.png","https://github.com/images/kaggle_titanic/output_60_0.png","https://github.com/images/kaggle_titanic/output_73_1.png","https://github.com/images/kaggle_titanic/output_75_0.png","https://github.com/images/kaggle_titanic/output_79_0.png","https://github.com/images/kaggle_titanic/output_86_1.png","https://github.com/images/kaggle_titanic/output_88_1.png","https://github.com/images/kaggle_titanic/output_93_0.png","https://github.com/images/kaggle_titanic/output_95_1.png","https://github.com/images/kaggle_titanic/output_98_0.png"],"datePublished":"2020-11-04T06:54:24.162Z","dateModified":"2020-11-04T07:03:46.062Z","author":{"@type":"Person","name":"JustY"},"description":"사전 준비Kaggle 데이터 불러오기Kaggle API 설치1!pip install kaggle  Requirement already satisfied: kaggle in &#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.6&#x2F;dist-packages (1.5.9) Requirement already satisfied: slugify in &#x2F;usr&#x2F;local&#x2F;lib&#x2F;"}</script><link rel="canonical" href="https://github.com/idanjfhgkwl/idanjfhgkwl.github.io/2020/11/04/study/kaggle_titanic/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="제목" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-04T06:54:24.162Z" title="2020-11-04T06:54:24.162Z">2020-11-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-04T07:03:46.062Z" title="2020-11-04T07:03:46.062Z">2020-11-04</time></span><span class="level-item"><a class="link-muted" href="/categories/study/">study</a></span><span class="level-item">32 minutes read (About 4729 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">캐글 타이타닉 분석</h1><div class="content"><h1 id="사전-준비"><a href="#사전-준비" class="headerlink" title="사전 준비"></a>사전 준비</h1><h2 id="Kaggle-데이터-불러오기"><a href="#Kaggle-데이터-불러오기" class="headerlink" title="Kaggle 데이터 불러오기"></a>Kaggle 데이터 불러오기</h2><h3 id="Kaggle-API-설치"><a href="#Kaggle-API-설치" class="headerlink" title="Kaggle API 설치"></a>Kaggle API 설치</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!pip install kaggle</span><br></pre></td></tr></table></figure>

<pre><code>Requirement already satisfied: kaggle in /usr/local/lib/python3.6/dist-packages (1.5.9)
Requirement already satisfied: slugify in /usr/local/lib/python3.6/dist-packages (from kaggle) (0.0.1)
Requirement already satisfied: requests in /usr/local/lib/python3.6/dist-packages (from kaggle) (2.23.0)
Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/dist-packages (from kaggle) (2.8.1)
Requirement already satisfied: python-slugify in /usr/local/lib/python3.6/dist-packages (from kaggle) (4.0.1)
Requirement already satisfied: urllib3 in /usr/local/lib/python3.6/dist-packages (from kaggle) (1.24.3)
Requirement already satisfied: tqdm in /usr/local/lib/python3.6/dist-packages (from kaggle) (4.41.1)
Requirement already satisfied: six&gt;=1.10 in /usr/local/lib/python3.6/dist-packages (from kaggle) (1.15.0)
Requirement already satisfied: certifi in /usr/local/lib/python3.6/dist-packages (from kaggle) (2020.6.20)
Requirement already satisfied: chardet&lt;4,&gt;=3.0.2 in /usr/local/lib/python3.6/dist-packages (from requests-&gt;kaggle) (3.0.4)
Requirement already satisfied: idna&lt;3,&gt;=2.5 in /usr/local/lib/python3.6/dist-packages (from requests-&gt;kaggle) (2.10)
Requirement already satisfied: text-unidecode&gt;=1.3 in /usr/local/lib/python3.6/dist-packages (from python-slugify-&gt;kaggle) (1.3)</code></pre>
<h3 id="Kaggle-Token-다운로드"><a href="#Kaggle-Token-다운로드" class="headerlink" title="Kaggle Token 다운로드"></a>Kaggle Token 다운로드</h3><ul>
<li>아래 코드는 Kaggle API 토큰을 업로드 하는 코드이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> google.colab <span class="keyword">import</span> files</span><br><span class="line">uploaded = files.upload()</span><br><span class="line"><span class="keyword">for</span> fn <span class="keyword">in</span> uploaded.keys():</span><br><span class="line">  print(<span class="string">&#x27;uploaded file &quot;&#123;name&#125;&quot; with length &#123;length&#125; bytes&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">      name=fn, length=<span class="built_in">len</span>(uploaded[fn])))</span><br><span class="line">  </span><br><span class="line"><span class="comment"># kaggle.json을 아래 폴더로 옮긴 뒤, file을 사용할 수 있도록 권한을 부여한다. </span></span><br><span class="line">!mkdir -p ~/.kaggle/ &amp;&amp; mv kaggle.json ~/.kaggle/ &amp;&amp; chmod <span class="number">600</span> ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>



<p><input type="file" id="files-592da31b-7e75-411b-a370-9191931ad855" name="files[]" multiple disabled
   style="border:none" /><br><output id="result-592da31b-7e75-411b-a370-9191931ad855"><br> Upload widget is only available when the cell has been executed in the<br> current browser session. Please rerun this cell to enable.<br> </output><br> <script src="/nbextensions/google.colab/files.js"></script> </p>
<pre><code>Saving kaggle.json to kaggle.json
uploaded file &quot;kaggle.json&quot; with length 63 bytes</code></pre>
<ul>
<li>실제로 kaggle.json 파일이 업로드 되었는지 확인</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls <span class="number">-1</span>ha ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>

<pre><code>/root/.kaggle/kaggle.json</code></pre>
<h3 id="구글-드라이브-연동"><a href="#구글-드라이브-연동" class="headerlink" title="구글 드라이브 연동"></a>구글 드라이브 연동</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> google.colab <span class="keyword">import</span> drive <span class="comment"># 패키지 불러오기 </span></span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 구글 드라이브 마운트</span></span><br><span class="line">ROOT = <span class="string">&quot;/content/drive&quot;</span>     <span class="comment"># 드라이브 기본 경로</span></span><br><span class="line">print(ROOT)                 <span class="comment"># print content of ROOT (Optional)</span></span><br><span class="line">drive.mount(ROOT)           <span class="comment"># 드라이브 기본 경로 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 프로젝트 파일 생성 및 다운받을 경로 이동</span></span><br><span class="line">MY_GOOGLE_DRIVE_PATH = <span class="string">&#x27;My Drive/Colab Notebooks/python_basic/kaggle_titanic/data&#x27;</span></span><br><span class="line">PROJECT_PATH = join(ROOT, MY_GOOGLE_DRIVE_PATH)</span><br><span class="line">print(PROJECT_PATH)</span><br></pre></td></tr></table></figure>

<pre><code>/content/drive
Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(&quot;/content/drive&quot;, force_remount=True).
/content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic/data</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%cd <span class="string">&quot;&#123;PROJECT_PATH&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<pre><code>/content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic/data</code></pre>
<h3 id="kaggle-competition-list-불러오기"><a href="#kaggle-competition-list-불러오기" class="headerlink" title="kaggle competition list 불러오기"></a>kaggle competition list 불러오기</h3><ul>
<li>캐글 대회 목록 불러오기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!kaggle competitions <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<pre><code>Warning: Looks like you&#39;re using an outdated API Version, please consider updating (server 1.5.9 / client 1.5.4)
ref                                            deadline             category            reward  teamCount  userHasEntered  
---------------------------------------------  -------------------  ---------------  ---------  ---------  --------------  
contradictory-my-dear-watson                   2030-07-01 23:59:00  Getting Started     Prizes        134           False  
gan-getting-started                            2030-07-01 23:59:00  Getting Started     Prizes        185           False  
tpu-getting-started                            2030-06-03 23:59:00  Getting Started  Knowledge        315           False  
digit-recognizer                               2030-01-01 00:00:00  Getting Started  Knowledge       2356           False  
titanic                                        2030-01-01 00:00:00  Getting Started  Knowledge      18089            True  
house-prices-advanced-regression-techniques    2030-01-01 00:00:00  Getting Started  Knowledge       4541            True  
connectx                                       2030-01-01 00:00:00  Getting Started  Knowledge        391           False  
nlp-getting-started                            2030-01-01 00:00:00  Getting Started  Knowledge       1184           False  
rock-paper-scissors                            2021-02-01 23:59:00  Playground          Prizes        158           False  
riiid-test-answer-prediction                   2021-01-07 23:59:00  Featured          $100,000       1470           False  
nfl-big-data-bowl-2021                         2021-01-05 23:59:00  Analytics         $100,000          0           False  
competitive-data-science-predict-future-sales  2020-12-31 23:59:00  Playground           Kudos       9344           False  
halite-iv-playground-edition                   2020-12-31 23:59:00  Playground       Knowledge         43           False  
predict-volcanic-eruptions-ingv-oe             2020-12-28 23:59:00  Playground            Swag        193           False  
hashcode-drone-delivery                        2020-12-14 23:59:00  Playground       Knowledge         79           False  
cdp-unlocking-climate-solutions                2020-12-02 23:59:00  Analytics          $91,000          0           False  
lish-moa                                       2020-11-30 23:59:00  Research           $30,000       3400           False  
google-football                                2020-11-30 23:59:00  Featured            $6,000        917           False  
conways-reverse-game-of-life-2020              2020-11-30 23:59:00  Playground            Swag        131           False  
lyft-motion-prediction-autonomous-vehicles     2020-11-25 23:59:00  Featured           $30,000        780           False  </code></pre>
<h3 id="Titanic-Machine-Learning-from-Disaster-데이터셋-불러오기"><a href="#Titanic-Machine-Learning-from-Disaster-데이터셋-불러오기" class="headerlink" title="Titanic: Machine Learning from Disaster 데이터셋 불러오기"></a>Titanic: Machine Learning from Disaster 데이터셋 불러오기</h3><ul>
<li>타이타닉 대회 데이터를 가져오는 코드이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!kaggle competitions download -c titanic</span><br></pre></td></tr></table></figure>

<pre><code>Warning: Looks like you&#39;re using an outdated API Version, please consider updating (server 1.5.9 / client 1.5.4)
Downloading gender_submission.csv to /content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic/data
  0% 0.00/3.18k [00:00&lt;?, ?B/s]
100% 3.18k/3.18k [00:00&lt;00:00, 426kB/s]
Downloading train.csv to /content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic/data
  0% 0.00/59.8k [00:00&lt;?, ?B/s]
100% 59.8k/59.8k [00:00&lt;00:00, 8.45MB/s]
Downloading test.csv to /content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic/data
  0% 0.00/28.0k [00:00&lt;?, ?B/s]
100% 28.0k/28.0k [00:00&lt;00:00, 3.99MB/s]</code></pre>
<ul>
<li>리눅스 명령어 ls는 경로(폴더) 내 모든 데이터 파일을 보여준다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!ls</span><br></pre></td></tr></table></figure>

<pre><code>gender_submission.csv  test.csv  train.csv</code></pre>
<h2 id="캐글-데이터-수집-및-EDA"><a href="#캐글-데이터-수집-및-EDA" class="headerlink" title="캐글 데이터 수집 및 EDA"></a>캐글 데이터 수집 및 EDA</h2><p>우선 데이터를 수집하기에 앞서서 EDA에 관한 필수 패키지를 설치하자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># 데이터 가공, 변환(dplyr)</span></span><br><span class="line"><span class="keyword">import</span> pandas_profiling <span class="comment"># 보고서 기능 # 아나콘다 할 때... 실습</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># 수치 연산 &amp; 배열, 행렬</span></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl <span class="comment"># 시각화</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment"># 시각화</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns <span class="comment"># 시각화</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> IPython.core.display <span class="keyword">import</span> display, HTML</span><br></pre></td></tr></table></figure>

<h3 id="데이터-수집"><a href="#데이터-수집" class="headerlink" title="데이터 수집"></a>데이터 수집</h3><p>여기에서는 우선 <code>test.csv</code> &amp; <code>train.csv</code> 파일을 받도록 한다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 경로 변경 (프로젝트 파일 생성 및 다운받을 경로 이동)</span></span><br><span class="line">MY_GOOGLE_DRIVE_PATH = <span class="string">&#x27;My Drive/Colab Notebooks/python_basic/kaggle_titanic&#x27;</span></span><br><span class="line">PROJECT_PATH = join(ROOT, MY_GOOGLE_DRIVE_PATH)</span><br><span class="line">print(PROJECT_PATH)</span><br></pre></td></tr></table></figure>

<pre><code>/content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%cd <span class="string">&quot;&#123;PROJECT_PATH&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<pre><code>/content/drive/My Drive/Colab Notebooks/python_basic/kaggle_titanic</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!ls</span><br></pre></td></tr></table></figure>

<pre><code>data  source</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">train = pd.read_csv(<span class="string">&#x27;data/train.csv&#x27;</span>)</span><br><span class="line">test = pd.read_csv(<span class="string">&#x27;data/test.csv&#x27;</span>)</span><br><span class="line">print(<span class="string">&quot;data import is done&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>data import is done</code></pre>
<h3 id="데이터-확인"><a href="#데이터-확인" class="headerlink" title="데이터 확인"></a>데이터 확인</h3><ul>
<li><code>Kaggle</code> 데이터를 불러오면 우선 확인해야 하는 것은 데이터셋의 크기다. <ul>
<li>변수의 갯수</li>
<li>수치형 변수 &amp; 범주형 변수의 개수 등을 파악해야 한다.</li>
</ul>
</li>
<li>Point 1 - <code>train</code>데이터에서 굳이 훈련데이터와 테스트 데이터를 구분할 필요는 없다. <ul>
<li>보통 <code>Kaggle</code>에서는 테스트 데이터를 주기적으로 업데이트 해준다.</li>
</ul>
</li>
<li>Point 2 - 보통 <code>test</code> 데이터의 변수의 개수가 하나 더 작다. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((891, 12), (418, 11))</code></pre>
<ul>
<li>그 후 <code>train</code>데이터의 <code>상위 5개</code>의 데이터만 확인한다. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display(train.head())</span><br></pre></td></tr></table></figure>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>


<ul>
<li>그 다음 확인해야 하는 것은 <code>수치형</code> 변수와 <code>범주형</code> 변수를 구분한다. <ul>
<li>먼저 <code>numerical_features</code>를 구분하자.</li>
</ul>
</li>
<li>데이터의 변수가 많아서, 일단 숫자형과 문자형으로 분리한 후, EDA를 하려고 한다.</li>
<li>아래 코드는 <code>train</code>데이터에서 숫자형 변수만 추출하는 코드이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numeric_features = train.select_dtypes(include=[np.number]) <span class="comment"># 수치형 데이터</span></span><br><span class="line">print(numeric_features.columns)</span><br><span class="line">print(<span class="string">&quot;The total number of include numeric features are: &quot;</span>, <span class="built_in">len</span>(numeric_features.columns))</span><br></pre></td></tr></table></figure>

<pre><code>Index([&#39;PassengerId&#39;, &#39;Survived&#39;, &#39;Pclass&#39;, &#39;Age&#39;, &#39;SibSp&#39;, &#39;Parch&#39;, &#39;Fare&#39;], dtype=&#39;object&#39;)
The total number of include numeric features are:  7</code></pre>
<ul>
<li><code>numeric_features</code>을 제외한 나머지 변수를 추출하자. (Categorical 등)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categorical_features = train.select_dtypes(exclude=[np.number]) <span class="comment"># 수치형이 아닌 데이터</span></span><br><span class="line">print(categorical_features.columns)</span><br><span class="line">print(<span class="string">&quot;The total number of exclude numeric features are: &quot;</span>, <span class="built_in">len</span>(categorical_features.columns))</span><br></pre></td></tr></table></figure>

<pre><code>Index([&#39;Name&#39;, &#39;Sex&#39;, &#39;Ticket&#39;, &#39;Cabin&#39;, &#39;Embarked&#39;], dtype=&#39;object&#39;)
The total number of exclude numeric features are:  5</code></pre>
<ul>
<li>우선 전체 데이터는 <code>891</code>개 변수는 <code>12</code>개로 확인했다. <ul>
<li>그 중 수치형 변수는 7개, 문자형 변수는 5개인 것으로 확인된다. </li>
</ul>
</li>
</ul>
<h1 id="타이타닉-분석-따라하기"><a href="#타이타닉-분석-따라하기" class="headerlink" title="타이타닉 분석 따라하기"></a>타이타닉 분석 따라하기</h1><ul>
<li><a target="_blank" rel="noopener" href="https://colab.research.google.com/drive/1cqv5yD9uLHHrVFL-TGM9NPSD1ZyF4AC1">colab, 전태균님의 타이타닉 분석</a>  </li>
<li>타이타닉에 탑승한 사람들의 신상정보를 활용하여, 승선한 사람들의 생존여부를 예측하는 모델을 생성할 것이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="comment"># matplotlib 의 기본 scheme 말고 seaborn scheme 을 세팅하고,</span></span><br><span class="line"><span class="comment"># 일일이 graph 의 font size 를 지정할 필요 없이 seaborn 의 font_scale 을 사용하면 편하다.</span></span><br><span class="line">plt.style.use(<span class="string">&#x27;seaborn&#x27;</span>)</span><br><span class="line">sns.<span class="built_in">set</span>(font_scale = <span class="number">2.1</span>)</span><br><span class="line"><span class="keyword">import</span> missingno <span class="keyword">as</span> msno</span><br><span class="line"></span><br><span class="line"><span class="comment"># warnings 무시</span></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>

<h2 id="데이터셋-확인"><a href="#데이터셋-확인" class="headerlink" title="데이터셋 확인"></a>데이터셋 확인</h2><ul>
<li>대부분의 캐글 데이터들은 장 정제되어 있다. 하지만 가끔 null data가 존재한다. 이를 확인하고, 향후 수정한다.</li>
<li>pandas는 파이썬에서 테이블화 된 데이터를 다루는 데 가장 최적화되어 있으며, 많이 쓰이는 라이브러리이다.</li>
<li>pandas를 사용하여 Dataset의 간단한 통계적 분석부터, 복잡한 처리들을 간단한 메소드를 사용하여 해낼 수 있다.</li>
<li>pandas는 파이썬으로 데이터 분석을 한다고 하면 능숙해져야 할 라이브러리이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!ls()</span><br></pre></td></tr></table></figure>

<pre><code>/bin/bash: -c: line 1: syntax error: unexpected end of file</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df_train = train</span><br><span class="line">df_test = test</span><br><span class="line">df_train.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>이 타이타닉에서 Feature는 Pclass(티켓의 클래스), Age(성별), SibSp(함께 탑승한 형제와 배우자의 수), Parch(함께 탑승한 부모, 아이의 수), Fare(탑승료) 이며, 예측하려는 target label은 Survived(생존여부) 이다.  </li>
</ul>
<table>
<thead>
<tr>
<th>변수(feature, variable)</th>
<th>정의</th>
<th>설명</th>
<th>타입</th>
</tr>
</thead>
<tbody><tr>
<td>Survived</td>
<td>생존여부</td>
<td>target label 임. 1, 0 으로 표현됨</td>
<td>integer</td>
</tr>
<tr>
<td>Pclass</td>
<td>티켓의 클래스</td>
<td>1 = 1st, 2 = 2nd, 3 = 3rd 클래스로 나뉘며 categorical feature</td>
<td>integer</td>
</tr>
<tr>
<td>Sex</td>
<td>성별</td>
<td>male, female 로 구분되며 binary</td>
<td>string</td>
</tr>
<tr>
<td>Age</td>
<td>나이</td>
<td>continuous</td>
<td>integer</td>
</tr>
<tr>
<td>SibSp</td>
<td>함께 탑승한 형제와 배우자의 수</td>
<td>quantitative</td>
<td>integer</td>
</tr>
<tr>
<td>Parch</td>
<td>함께 탑승한 부모, 아이의 수</td>
<td>quantitative</td>
<td>integer</td>
</tr>
<tr>
<td>Ticket</td>
<td>티켓 번호</td>
<td>alphabat + integer</td>
<td>string</td>
</tr>
<tr>
<td>Fare</td>
<td>탑승료</td>
<td>continuous</td>
<td>float</td>
</tr>
<tr>
<td>Cabin</td>
<td>객실 번호</td>
<td>alphabat + integer</td>
<td>string</td>
</tr>
<tr>
<td>Embarked</td>
<td>탑승 항구</td>
<td>C = Cherbourg, Q = Queenstown, S = Southampton</td>
<td>string</td>
</tr>
</tbody></table>
<ul>
<li>Feature Engineering은 머신러닝 알고리즘을 작동하기 위해 데이터에 대한 도메인 지식을 활용하여 특징(Feature)을 만들어내는 과정이다. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Feature_engineering">출처</a></li>
<li>또는 머신러닝 모델을 위한 데이터 테이블의 컬럼(특징)을 생성하거나 선택하는 작업을 의미한다.</li>
<li>간단히 정리하면, 모델의 성능을 높이기 위해, 모델에 입력할 데이터를 만들기 위해 주어진 초기 데이터로부터 특징을 가공하고 생성하는 전체 과정을 의미한다.  </li>
</ul>
<h3 id="Null-data-check"><a href="#Null-data-check" class="headerlink" title="Null data check"></a>Null data check</h3><p>describe() 메소드를 쓰면 각 feature가 가진 통계치들을 반환해준다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_train.describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>714.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>446.000000</td>
      <td>0.383838</td>
      <td>2.308642</td>
      <td>29.699118</td>
      <td>0.523008</td>
      <td>0.381594</td>
      <td>32.204208</td>
    </tr>
    <tr>
      <th>std</th>
      <td>257.353842</td>
      <td>0.486592</td>
      <td>0.836071</td>
      <td>14.526497</td>
      <td>1.102743</td>
      <td>0.806057</td>
      <td>49.693429</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.420000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>223.500000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>20.125000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>7.910400</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>446.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>28.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>14.454200</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>668.500000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>38.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>31.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>891.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>80.000000</td>
      <td>8.000000</td>
      <td>6.000000</td>
      <td>512.329200</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_test.describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>418.000000</td>
      <td>418.000000</td>
      <td>332.000000</td>
      <td>418.000000</td>
      <td>418.000000</td>
      <td>417.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1100.500000</td>
      <td>2.265550</td>
      <td>30.272590</td>
      <td>0.447368</td>
      <td>0.392344</td>
      <td>35.627188</td>
    </tr>
    <tr>
      <th>std</th>
      <td>120.810458</td>
      <td>0.841838</td>
      <td>14.181209</td>
      <td>0.896760</td>
      <td>0.981429</td>
      <td>55.907576</td>
    </tr>
    <tr>
      <th>min</th>
      <td>892.000000</td>
      <td>1.000000</td>
      <td>0.170000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>996.250000</td>
      <td>1.000000</td>
      <td>21.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>7.895800</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1100.500000</td>
      <td>3.000000</td>
      <td>27.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>14.454200</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1204.750000</td>
      <td>3.000000</td>
      <td>39.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>31.500000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1309.000000</td>
      <td>3.000000</td>
      <td>76.000000</td>
      <td>8.000000</td>
      <td>9.000000</td>
      <td>512.329200</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>이 테이블을 보면 PassengerId 숫자와 다른, null data가 존재하는 열(feature)이 있는 것 같다고 하는데 공부가 필요하다.</li>
<li>이를 좀 더 보기 편하도록 그래프로 시각화해서 살펴본다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> df_train.columns:</span><br><span class="line">  msg = <span class="string">&#x27;column: &#123;:&gt;10&#125;\t Percent of NaN value: &#123;:.2f&#125;%&#x27;</span>.<span class="built_in">format</span>(col, <span class="number">100</span> * (df_train[col].isnull().<span class="built_in">sum</span>() / df_train[col].shape[<span class="number">0</span>]))</span><br><span class="line">  print(msg)</span><br></pre></td></tr></table></figure>

<pre><code>column: PassengerId     Percent of NaN value: 0.00%
column:   Survived     Percent of NaN value: 0.00%
column:     Pclass     Percent of NaN value: 0.00%
column:       Name     Percent of NaN value: 0.00%
column:        Sex     Percent of NaN value: 0.00%
column:        Age     Percent of NaN value: 19.87%
column:      SibSp     Percent of NaN value: 0.00%
column:      Parch     Percent of NaN value: 0.00%
column:     Ticket     Percent of NaN value: 0.00%
column:       Fare     Percent of NaN value: 0.00%
column:      Cabin     Percent of NaN value: 77.10%
column:   Embarked     Percent of NaN value: 0.22%</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> df_test.columns:</span><br><span class="line">    msg = <span class="string">&#x27;column: &#123;:&gt;10&#125;\t Percent of NaN value: &#123;:.2f&#125;%&#x27;</span>.<span class="built_in">format</span>(col, <span class="number">100</span> * (df_test[col].isnull().<span class="built_in">sum</span>() / df_test[col].shape[<span class="number">0</span>]))</span><br><span class="line">    print(msg)</span><br></pre></td></tr></table></figure>

<pre><code>column: PassengerId     Percent of NaN value: 0.00%
column:     Pclass     Percent of NaN value: 0.00%
column:       Name     Percent of NaN value: 0.00%
column:        Sex     Percent of NaN value: 0.00%
column:        Age     Percent of NaN value: 20.57%
column:      SibSp     Percent of NaN value: 0.00%
column:      Parch     Percent of NaN value: 0.00%
column:     Ticket     Percent of NaN value: 0.00%
column:       Fare     Percent of NaN value: 0.24%
column:      Cabin     Percent of NaN value: 78.23%
column:   Embarked     Percent of NaN value: 0.00%</code></pre>
<ul>
<li>Train, Test 데이터셋에서 Age(둘 다 약 20%), Cabin(둘 다 약 80%), Embarked(Train만 0.22%) null data가 존재하는 것을 볼 수 있다.</li>
<li>missingno(MSNO)라는 라이브러리를 사용하면 null data의 존재를 더 쉽게 볼 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msno.matrix(df = df_train.iloc[:, :], figsize = (<span class="number">8</span>, <span class="number">8</span>), color = (<span class="number">0.8</span>, <span class="number">0.5</span>, <span class="number">0.2</span>))</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f6a1b8e4ef0&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_55_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msno.bar(df = df_train.iloc[:, :], figsize = (<span class="number">8</span>, <span class="number">8</span>), color = (<span class="number">0.8</span>, <span class="number">0.5</span>, <span class="number">0.2</span>))</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f6a1b94d160&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_56_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msno.bar(df = df_test.iloc[:, :], figsize = (<span class="number">8</span>, <span class="number">8</span>), color = (<span class="number">0.8</span>, <span class="number">0.5</span>, <span class="number">0.2</span>))</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f6a1baef198&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_57_1.png" alt="png"></p>
<h3 id="Target-label-확인"><a href="#Target-label-확인" class="headerlink" title="Target label 확인"></a>Target label 확인</h3><ul>
<li>target label이 어떤 분포(distribution)를 가지고 있는 지 확인해봐야 한다.</li>
<li>binary classification 문제의 경우에서, 1과 0의 분포가 어떠냐에 따라 모델의 평가 방법이 달라질 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize = (<span class="number">18</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">df_train[<span class="string">&#x27;Survived&#x27;</span>].value_counts().plot.pie(explode = [<span class="number">0</span>, <span class="number">0.1</span>], autopct = <span class="string">&#x27;%1.1f%%&#x27;</span>, ax = ax[<span class="number">0</span>], shadow = <span class="literal">True</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Pie plot - Survived&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Survived&#x27;</span>, data = df_train, ax = ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Count plot - Survived&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/kaggle_titanic/output_60_0.png" alt="png"></p>
<ul>
<li>38.4%가 살아남았다는 걸 알 수 있다.</li>
<li>target label의 분포가 제법 균일(balanced)하다.</li>
<li>불균일한 경우, 예를 들어 100 중 1이 99, 0이 1개인 경우에는 만약 모델이 모든 것을 1이라 해도 정확도가 99%가 나오게 된다. 0을 찾는 문제라면 이 모델은 원하는 결과를 줄 수 없게 된다.</li>
</ul>
<h2 id="EDA-탐색적-데이터-분석"><a href="#EDA-탐색적-데이터-분석" class="headerlink" title="EDA 탐색적 데이터 분석"></a>EDA 탐색적 데이터 분석</h2><ul>
<li>Exploratory Data Analysis. 많은 데이터 안의 숨겨진 사실을 찾기 위해서는 적절한 시각화가 필요하다.</li>
<li>시각화 라이브러리는 matplotlib, seaborn, plotly 등이 있다. 특정 목적에 맞는 소스코드를 정리해서 필요할 때마다 참고하면 편하다.</li>
</ul>
<h3 id="Pclass"><a href="#Pclass" class="headerlink" title="Pclass"></a>Pclass</h3><ul>
<li><p>Pclass는 서수형 데이터(ordinal)이다. 카테고리이면서, 순서가 있는 데이터 타입이다.</p>
</li>
<li><p>Pclass에 따른 생존률의 차이를 살펴보겠다. 엑셀의 피벗 차트와 유사한 작업을 하게 되는데, pandas dataframe엣는 groupby를 사용하면 쉽게 할 수 있다. 또한 pivot이라는 메소드도 있다.</p>
</li>
<li><p>‘Pclass’, “Survived’를 가져온 후, Pclass로 묶는다. 그러고 나면 각 Pclass마다 0과 1이 count가 되는데, 이를 평균 내면 각 Pclass별 생존률이 나온다.</p>
</li>
<li><p>아래와 같이 count()를 하면, 각 Pclass에 몇 명이 있는 지 확인할 수 있다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_train[[<span class="string">&#x27;Pclass&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>]].groupby([<span class="string">&#x27;Pclass&#x27;</span>], as_index = <span class="literal">True</span>).count()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Survived</th>
    </tr>
    <tr>
      <th>Pclass</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>216</td>
    </tr>
    <tr>
      <th>2</th>
      <td>184</td>
    </tr>
    <tr>
      <th>3</th>
      <td>491</td>
    </tr>
  </tbody>
</table>
</div>



<p>아래와 같이 sum()을 하면, 216명 중 생존한(Survived = 1) 사람의 총합을 주게 된다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_train[[<span class="string">&#x27;Pclass&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>]].groupby([<span class="string">&#x27;Pclass&#x27;</span>], as_index = <span class="literal">True</span>).<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Survived</th>
    </tr>
    <tr>
      <th>Pclass</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>136</td>
    </tr>
    <tr>
      <th>2</th>
      <td>87</td>
    </tr>
    <tr>
      <th>3</th>
      <td>119</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>pandas의 <a target="_blank" rel="noopener" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.crosstab.html">crosstab</a>을 사용하면 위 과정을 좀 더 수월하게 볼 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(df_train[<span class="string">&#x27;Pclass&#x27;</span>], df_train[<span class="string">&#x27;Survived&#x27;</span>], margins = <span class="literal">True</span>).style.background_gradient(cmap = <span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>




<style  type="text/css" >
#T_cc711248_1e5c_11eb_8373_0242ac1c0002row0_col0,#T_cc711248_1e5c_11eb_8373_0242ac1c0002row1_col1,#T_cc711248_1e5c_11eb_8373_0242ac1c0002row1_col2{
            background-color:  #ffff66;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row0_col1{
            background-color:  #cee666;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row0_col2{
            background-color:  #f4fa66;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row1_col0{
            background-color:  #f6fa66;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row2_col0{
            background-color:  #60b066;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row2_col1{
            background-color:  #dfef66;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row2_col2{
            background-color:  #90c866;
            color:  #000000;
        }#T_cc711248_1e5c_11eb_8373_0242ac1c0002row3_col0,#T_cc711248_1e5c_11eb_8373_0242ac1c0002row3_col1,#T_cc711248_1e5c_11eb_8373_0242ac1c0002row3_col2{
            background-color:  #008066;
            color:  #f1f1f1;
        }</style><table id="T_cc711248_1e5c_11eb_8373_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Survived</th>        <th class="col_heading level0 col0" >0</th>        <th class="col_heading level0 col1" >1</th>        <th class="col_heading level0 col2" >All</th>    </tr>    <tr>        <th class="index_name level0" >Pclass</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
<pre><code>            &lt;tr&gt;
                    &lt;th id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002level0_row0&quot; class=&quot;row_heading level0 row0&quot; &gt;1&lt;/th&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row0_col0&quot; class=&quot;data row0 col0&quot; &gt;80&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row0_col1&quot; class=&quot;data row0 col1&quot; &gt;136&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row0_col2&quot; class=&quot;data row0 col2&quot; &gt;216&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
                    &lt;th id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002level0_row1&quot; class=&quot;row_heading level0 row1&quot; &gt;2&lt;/th&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row1_col0&quot; class=&quot;data row1 col0&quot; &gt;97&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row1_col1&quot; class=&quot;data row1 col1&quot; &gt;87&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row1_col2&quot; class=&quot;data row1 col2&quot; &gt;184&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
                    &lt;th id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002level0_row2&quot; class=&quot;row_heading level0 row2&quot; &gt;3&lt;/th&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row2_col0&quot; class=&quot;data row2 col0&quot; &gt;372&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row2_col1&quot; class=&quot;data row2 col1&quot; &gt;119&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row2_col2&quot; class=&quot;data row2 col2&quot; &gt;491&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
                    &lt;th id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002level0_row3&quot; class=&quot;row_heading level0 row3&quot; &gt;All&lt;/th&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row3_col0&quot; class=&quot;data row3 col0&quot; &gt;549&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row3_col1&quot; class=&quot;data row3 col1&quot; &gt;342&lt;/td&gt;
                    &lt;td id=&quot;T_cc711248_1e5c_11eb_8373_0242ac1c0002row3_col2&quot; class=&quot;data row3 col2&quot; &gt;891&lt;/td&gt;
        &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</code></pre>
<ul>
<li>그룹화된 객체에 mean()을 하게 되면, 각 클래스별 생존률을 얻을 수 있다. class 1이면 아래와 같다.</li>
</ul>
<p>$$ {80 \over (80 + 136)} \approx 0.63 $$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_train[[<span class="string">&#x27;Pclass&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>]].groupby([<span class="string">&#x27;Pclass&#x27;</span>], as_index = <span class="literal">True</span>).mean().sort_values(by = <span class="string">&#x27;Survived&#x27;</span>, ascending = <span class="literal">False</span>).plot.bar()</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f6a1bab4828&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_73_1.png" alt="png"></p>
<ul>
<li>Pclass가 좋을 수록(1st) 생존률이 높은 것을 확인할 수 있다.</li>
<li>seaborn의 countplot을 이용하면 특정 label에 따른 개수를 확인해볼 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">y_position = <span class="number">1.02</span></span><br><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize = (<span class="number">18</span>, <span class="number">8</span>))</span><br><span class="line">df_train[<span class="string">&#x27;Pclass&#x27;</span>].value_counts().plot.bar(color = [<span class="string">&#x27;#CD7F32&#x27;</span>,<span class="string">&#x27;#FFDF00&#x27;</span>,<span class="string">&#x27;#D3D3D3&#x27;</span>], ax = ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Number of Passengers By Pclass&#x27;</span>, y = y_position)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">&#x27;Count&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Pclass&#x27;</span>, hue = <span class="string">&#x27;Survived&#x27;</span>, data = df_train, ax = ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Pclass: Survived vs Dead&#x27;</span>, y = y_position)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/kaggle_titanic/output_75_0.png" alt="png"></p>
<ul>
<li>Pclass가 높을 수록, 생존 확률이 높은 걸 확인할 수 있다? Pclass 1, 2, 3 순서대로 63%, 48%, 25% 이다.</li>
<li>생존에 Pclass가 큰 영향을 미친다고 생각해볼 수 있으며, 나중에 모델을 세울 때 이 feature를 사용하는 것이 좋을 것이라 판단할 수 있다.</li>
</ul>
<h3 id="Sex"><a href="#Sex" class="headerlink" title="Sex"></a>Sex</h3><ul>
<li>성별로 생존률이 어떻게 달라지는 지 확인해보겠다.</li>
<li>마찬가지로 pandas groupby와 seaborn countplot을 사용해서 시각화해본다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize = (<span class="number">18</span>, <span class="number">8</span>))</span><br><span class="line">df_train[[<span class="string">&#x27;Sex&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>]].groupby([<span class="string">&#x27;Sex&#x27;</span>], as_index = <span class="literal">True</span>).mean().plot.bar(ax = ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Survived vs Sex&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Sex&#x27;</span>, hue = <span class="string">&#x27;Survived&#x27;</span>, data = df_train, ax = ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Sex: Survived vs Dead&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/kaggle_titanic/output_79_0.png" alt="png"></p>
<ul>
<li>여자가 생존할 확률이 높은 걸 확인할 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_train[[<span class="string">&#x27;Sex&#x27;</span>, <span class="string">&quot;Survived&quot;</span>]].groupby([<span class="string">&#x27;Sex&#x27;</span>], as_index = <span class="literal">False</span>).mean().sort_values(by = <span class="string">&quot;Survived&quot;</span>, ascending = <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sex</th>
      <th>Survived</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>0.742038</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>0.188908</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(df_train[<span class="string">&#x27;Sex&#x27;</span>], df_train[<span class="string">&#x27;Survived&#x27;</span>], margins = <span class="literal">True</span>).style.background_gradient(cmap = <span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>




<style  type="text/css" >
#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row0_col0,#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row0_col2,#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row1_col1{
            background-color:  #ffff66;
            color:  #000000;
        }#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row0_col1{
            background-color:  #77bb66;
            color:  #000000;
        }#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row1_col0{
            background-color:  #2c9666;
            color:  #000000;
        }#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row1_col2{
            background-color:  #8bc566;
            color:  #000000;
        }#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row2_col0,#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row2_col1,#T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row2_col2{
            background-color:  #008066;
            color:  #f1f1f1;
        }</style><table id="T_6e4079ea_1e5f_11eb_8373_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Survived</th>        <th class="col_heading level0 col0" >0</th>        <th class="col_heading level0 col1" >1</th>        <th class="col_heading level0 col2" >All</th>    </tr>    <tr>        <th class="index_name level0" >Sex</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
<pre><code>            &lt;tr&gt;
                    &lt;th id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002level0_row0&quot; class=&quot;row_heading level0 row0&quot; &gt;female&lt;/th&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row0_col0&quot; class=&quot;data row0 col0&quot; &gt;81&lt;/td&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row0_col1&quot; class=&quot;data row0 col1&quot; &gt;233&lt;/td&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row0_col2&quot; class=&quot;data row0 col2&quot; &gt;314&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
                    &lt;th id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002level0_row1&quot; class=&quot;row_heading level0 row1&quot; &gt;male&lt;/th&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row1_col0&quot; class=&quot;data row1 col0&quot; &gt;468&lt;/td&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row1_col1&quot; class=&quot;data row1 col1&quot; &gt;109&lt;/td&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row1_col2&quot; class=&quot;data row1 col2&quot; &gt;577&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
                    &lt;th id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002level0_row2&quot; class=&quot;row_heading level0 row2&quot; &gt;All&lt;/th&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row2_col0&quot; class=&quot;data row2 col0&quot; &gt;549&lt;/td&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row2_col1&quot; class=&quot;data row2 col1&quot; &gt;342&lt;/td&gt;
                    &lt;td id=&quot;T_6e4079ea_1e5f_11eb_8373_0242ac1c0002row2_col2&quot; class=&quot;data row2 col2&quot; &gt;891&lt;/td&gt;
        &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</code></pre>
<p>$$ {81 \over (81 + 233)} \approx 0.74 $$</p>
<ul>
<li>Pclass와 마찬가지로, Sex도 예측 모델에 쓰일 중요한 feature 임을 알 수 있다.</li>
</ul>
<h3 id="Both-Sex-and-Pclass"><a href="#Both-Sex-and-Pclass" class="headerlink" title="Both Sex and Pclass"></a>Both Sex and Pclass</h3><ul>
<li>Sex, Pclass 2가지에 관하여 생존이 어떻게 달라지는 지 확인해 본다.</li>
<li>seaborn의 factorplot을 이용하면, 손쉽게 3개의 차원으로 이루어진 그래프를 그릴 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.factorplot(<span class="string">&#x27;Pclass&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>, hue = <span class="string">&#x27;Sex&#x27;</span>, data = df_train,</span><br><span class="line">               size = <span class="number">6</span>, aspect = <span class="number">1.5</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f6a1ae2a7b8&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_86_1.png" alt="png"></p>
<ul>
<li>모든 클래스에서 여자가 살 확률이 남자보다 높은 걸 알 수 있다.</li>
<li>또한 남자, 여자 상관없이 클래스가 높을 수록 살 확률이 높다.</li>
<li>hue = ‘Sex’ 대신 col = ‘Pclass’로 하면 아래와 같아진다. (column)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sns.factorplot(x = <span class="string">&#x27;Sex&#x27;</span>, y = <span class="string">&quot;Survived&quot;</span>, col = <span class="string">&#x27;Pclass&#x27;</span>,</span><br><span class="line">               data = df_train, satureation = <span class="number">5</span>,</span><br><span class="line">               size = <span class="number">9</span>, aspect = <span class="number">1</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f6a1ae10b70&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_88_1.png" alt="png"></p>
<h3 id="Age"><a href="#Age" class="headerlink" title="Age"></a>Age</h3><ul>
<li>Age Feature를 살펴보자.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&#x27;제일 나이 많은 탑승객 : &#123;:.1f&#125; Years&#x27;</span>.<span class="built_in">format</span>(df_train[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">max</span>()))</span><br><span class="line">print(<span class="string">&#x27;제일 어린 탑승객 : &#123;:.1f&#125; Years&#x27;</span>.<span class="built_in">format</span>(df_train[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">min</span>()))</span><br><span class="line">print(<span class="string">&#x27;탑승객 평균 나이 : &#123;:.1f&#125; Years&#x27;</span>.<span class="built_in">format</span>(df_train[<span class="string">&#x27;Age&#x27;</span>].mean()))</span><br></pre></td></tr></table></figure>

<pre><code>제일 나이 많은 탑승객 : 80.0 Years
제일 어린 탑승객 : 0.4 Years
탑승객 평균 나이 : 29.7 Years</code></pre>
<ul>
<li>생존에 따른 Age의 히스토그램을 그려보겠다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>, figsize = (<span class="number">9</span>, <span class="number">5</span>))</span><br><span class="line">sns.kdeplot(df_train[df_train[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>][<span class="string">&#x27;Age&#x27;</span>], ax = ax)</span><br><span class="line">sns.kdeplot(df_train[df_train[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>][<span class="string">&#x27;Age&#x27;</span>], ax = ax)</span><br><span class="line">plt.legend([<span class="string">&#x27;Survived == 1&#x27;</span>, <span class="string">&#x27;Survived == 0&#x27;</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/kaggle_titanic/output_93_0.png" alt="png"></p>
<ul>
<li>생존자 중 나이가 어린 경우가 많음을 볼 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Age distribution withing classes</span></span><br><span class="line">plt.figure(figsize = (<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line">df_train[<span class="string">&#x27;Age&#x27;</span>][df_train[<span class="string">&#x27;Pclass&#x27;</span>] == <span class="number">1</span>].plot(kind = <span class="string">&#x27;kde&#x27;</span>)</span><br><span class="line">df_train[<span class="string">&#x27;Age&#x27;</span>][df_train[<span class="string">&#x27;Pclass&#x27;</span>] == <span class="number">2</span>].plot(kind = <span class="string">&#x27;kde&#x27;</span>)</span><br><span class="line">df_train[<span class="string">&#x27;Age&#x27;</span>][df_train[<span class="string">&#x27;Pclass&#x27;</span>] == <span class="number">3</span>].plot(kind = <span class="string">&#x27;kde&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Age&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Age Distribution within classes&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;1st Class&#x27;</span>, <span class="string">&#x27;2nd Class&#x27;</span>, <span class="string">&#x27;3rd Class&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.legend.Legend at 0x7f6a1bcc4710&gt;</code></pre>
<p><img src="/images/kaggle_titanic/output_95_1.png" alt="png"></p>
<ul>
<li><p>Pclass가 높을 수록 나이 많은 사람의 비중이 커진다.</p>
</li>
<li><p>나이대가 변하면서 생존률이 어떻게 되는 지 보려고 한다.</p>
</li>
<li><p>나이 범위를 점점 넓혀가며, 생존률이 어떻게 되는 지 한 번 보자.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cummulate_survival_ratio = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">80</span>):</span><br><span class="line">  cummulate_survival_ratio.append(df_train[df_train[<span class="string">&#x27;Age&#x27;</span>] &lt; i][<span class="string">&#x27;Survived&#x27;</span>].<span class="built_in">sum</span>() / <span class="built_in">len</span>(df_train[df_train[<span class="string">&#x27;Age&#x27;</span>] &lt; i][<span class="string">&#x27;Survived&#x27;</span>]))</span><br><span class="line"></span><br><span class="line">plt.figure(figsize = (<span class="number">7</span>, <span class="number">7</span>))</span><br><span class="line">plt.plot(cummulate_survival_ratio)</span><br><span class="line">plt.title(<span class="string">&#x27;Survival rate change depending on range of Age&#x27;</span>, y = <span class="number">1.02</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Survival rate&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Range of Age(0~x)&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/kaggle_titanic/output_98_0.png" alt="png"></p>
<ul>
<li>나이가 어릴 수록 생존률이 확실히 높은 것을 확인할 수 있다.</li>
<li>Age는 중요한 Feature로 쓰일 수 있음을 확인했다.</li>
</ul>
<h3 id="Pclass-Sex-Age"><a href="#Pclass-Sex-Age" class="headerlink" title="Pclass, Sex, Age"></a>Pclass, Sex, Age</h3><ul>
<li>Sex, Pclass, Age, Sruvived 모두에 대해서 보고 싶다면, 이를 쉽게 그려주는 seaborn의 biolinplot을 사용한다.</li>
<li>x축은 우리가 나눠서 보고 싶어하는 case(Pclass, Sex)를 나타내고, y축은 보고 싶어하는 distribution(Age)이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize = (<span class="number">18</span>,<span class="number">8</span>))</span><br><span class="line">sns.violinplot(<span class="string">&quot;Pclass&quot;</span>, <span class="string">&quot;Age&quot;</span>, hue = <span class="string">&quot;Survived&quot;</span>, data = df_train, scale = <span class="string">&#x27;count&#x27;</span>, split = <span class="literal">True</span>, ax = ax[<span class="number">0</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>캐글 타이타닉 분석</p><p><a href="https://github.com/idanjfhgkwl/idanjfhgkwl.github.io/2020/11/04/study/kaggle_titanic/">https://github.com/idanjfhgkwl/idanjfhgkwl.github.io/2020/11/04/study/kaggle_titanic/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>JustY</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-11-04</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2020-11-04</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/11/04/study/pandas_10minutes/"><span class="level-item">판다스 10분 완성</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/study/"><span class="level-start"><span class="level-item">study</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-04T06:54:24.162Z">2020-11-04</time></p><p class="title"><a href="/2020/11/04/study/kaggle_titanic/">캐글 타이타닉 분석</a></p><p class="categories"><a href="/categories/study/">study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-04T06:24:43.147Z">2020-11-04</time></p><p class="title"><a href="/2020/11/04/study/pandas_10minutes/">판다스 10분 완성</a></p><p class="categories"><a href="/categories/study/">study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-02T02:47:22.284Z">2020-11-02</time></p><p class="title"><a href="/2020/11/02/study/kaggle_edu_Chapter_1_2_Python_visualisation_seaborn/">Chapter_1_2_Python_visualisation_seaborn</a></p><p class="categories"><a href="/categories/study/">study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-02T00:24:20.726Z">2020-11-02</time></p><p class="title"><a href="/2020/11/02/study/sql_10minutes_ch08_basic_command_language/">8장 기본 명령어</a></p><p class="categories"><a href="/categories/study/">study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-30T01:00:39.317Z">2020-10-30</time></p><p class="title"><a href="/2020/10/30/hello-world/">Hello World</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="제목" height="28"></a><p class="is-size-7"><span>&copy; 2020 JustY</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>